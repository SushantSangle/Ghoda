#include "stdInc.h"

Servo up[4],down[4];//SERVO

//time interval
int S = 2;
//-----------PROXY---------------

//-------------------------------

//----------FOR_MPU--------------

int yaw2=0,pitch2=0,roll2=0;
float yaw,pitch,roll;
float yp=0,pp=0,rp=0;
byte ypr1[6];

//-------------------------------

/*-------------------PINS-------------------------*/
const uint16_t upS[4]   = {38,30,26,40}; //{34,36,30,32}
const uint16_t downS[4] = {36,28,32,34}; //{40,38,28,26}
/*------------------------------------------------*/

/*-------------------OFFSET-----------------------*/
const int offset[8]={0,-3,10,-12,-15,-5,-7,-10};
/*------------------------------------------------*/

/*---------------------MULTIPLIERS----------------*/
float Hm[4];
float Lm[4];
const int upB[4]={1,-1,-1,1};
const int downB[4]={1,-1,-1,1};
int m;
/*------------------------------------------------*/

/*------------POSITION_MANIPULATION---------------*/
const int elb[2]={0,450};      //elbow co-ordinates
int els[4][2]; 
bool mode=0;
int LEG;
double xpriv[4]= {0,0,0,0};
double xnow[4] = {0,0,0,0};
/*------------------------------------------------*/

/*---------------ANGLE_MANIPULATION---------------*/
int rot=0,rot1,i=0;             //Rotation of axis
float slope=0;
int Angle[4][72][2];
/*------------------------------------------------*/

void setup()
{
  pinmode();
//  test();
  initial();
//  alternate();
  staticG();
  getangle(4);
  initial();
  delay(3000);
  Timer1.initialize(50000);
  Timer1.attachInterrupt(checkMPU);
}

void loop()
{
//  checkMPU();
  RUN(0);
  shift();
}

/*----------------------POINTS_FOR_ALTERNATE----------------------*/
const double pta[72][2] = {{0,0},{-4.3,0},{-8.6,0},{-12.9,0},{-21.5,0},{-25.8,0},
{-30.1,0},{-34.4,0},{-38.7,0},{-43,0},{-47.3,0},{-51.6,0},{-55.9,0},
{-60.2,0},{-64.5,0},{-68.8,0},{-73.1,0},{-77.4,0},{-88,1.8},{-96,6.4},
{-102.13,13},{-106,20},{-108,28},{-110,36},{-111,40},{-112,53},{-113,68},
{-112,77},{-111,84},{-108,102},{-106,109},{-100,119},{-91,123},{-87,128},
{-77.5,130},{-55.9,130},{55.6,130},{87,128},{91,123},{100,119},{104,113},
{106,109},{108,102},{111,84},{112,77},{113,68},{112,53},{111,40},
{110,36},{108,28},{106,20},{102.13,13},{102.13,13},{102.13,13},{77.4,0},
{73.1,0},{68.8,0},{64.5,0},{60.2,0},{55.9,0},{51.6,0},{47.3,0},{43,0},
{38.7,0},{34.4,0},{30.1,0},{25.8,0},{21.5,0},{17.2,0},{12.9,0},{8.6,0},
{4.3,0}};
const double pt1[72][2]={{0,0},{-2.87,0},{-5.74,0},{-8.61,0},
{-11.48,0},{-14.35,0},{-17.22,0},{-20.09,0},{-22.96,0},{-25.83,0},
{-28.7,0},{-31.57,0},{-34.44,0},{-37.31,0},{-40.18,0},{-43.05,0},
{-45.92,0},{-48.79,0},{-51.66,0},{-54.53,0},{-57.4,0},{-60.27,0},
{-63.14,0},{-66.01,0},{-68.88,0},{-71.75,0},{74.62,0},{-88,1.8},
{-96,6.4},{-102.13,13},{-106,20},{-111,40},{-113,68},{-100,119},
{-87,128},{-77.5,130},{55.6,130},{77.5,130},{87,128},{100,119},
{111,84},{113,68},{111,40},{108,28},{102.13,13},{77.5,0},{74.62,0},
{71.75,0},{68.88,0},{66.01,0},{63.14,0},{60.27,0},{57.4,0},
{54.53,0},{51.66,0},{48.79,0},{45.92,0},{43.05,0},{40.18,0},
{37.31,0},{34.44,0},{31.57,0},{28.7,0},{25.83,0},{22.96,0},
{20.09,0},{17.22,0},{14.35,0},{11.48,0},{8.61,0},{5.74,0},{2.87,0}};

double pt[72][2];
/*----------------------------------------------------------------*/
